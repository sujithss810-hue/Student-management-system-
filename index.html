<!DOCTYPE html>
<html>
<head>
<title>Student Management</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
font-family:Arial;
background:linear-gradient(135deg,#1e3c72,#2a5298);
margin:0;
padding:20px;
color:#333;
}

h2{color:white;text-align:center;}

.container{max-width:1000px;margin:auto;}

.stats{
background:white;
padding:10px;
text-align:center;
margin-bottom:15px;
border-radius:5px;
font-weight:bold;
}

.form{
background:white;
padding:15px;
margin-bottom:15px;
border-radius:5px;
display:flex;
flex-wrap:wrap;
gap:10px;
}

.form-group{
display:flex;
flex-direction:column;
}

input,select{
padding:6px;
border:1px solid #ccc;
border-radius:4px;
min-width:150px;
}

button{
padding:6px 10px;
border:none;
border-radius:4px;
cursor:pointer;
}

.add-btn{background:#2a5298;color:white;}
.edit-btn{background:orange;color:white;}
.delete-btn{background:red;color:white;}

table{
width:100%;
border-collapse:collapse;
background:white;
}

th,td{
border:1px solid #ddd;
padding:6px;
text-align:center;
}

th{
background:#2a5298;
color:white;
}

.message{
position:fixed;
top:20px;
right:20px;
background:#ff9800;
color:white;
padding:10px;
border-radius:5px;
display:none;
font-weight:bold;
}

#search{
padding:6px;
width:200px;
border-radius:4px;
border:1px solid #ccc;
}
</style>
</head>

<body>

<h2>Student Management System</h2>

<div class="container">

<div class="stats">
Total Students: <span id="totalCount">0</span>
</div>

<div class="form">

<div class="form-group">
<label>First Name</label>
<input type="text" id="name">
</div>

<div class="form-group">
<label>Age</label>
<input type="text" id="age" readonly onclick="checkDOB()">
</div>

<div class="form-group">
<label>Date of Birth</label>
<input type="date" id="dob" onchange="calculateAge()">
</div>

<div class="form-group">
<label>UG Number</label>
<input type="text" id="roll">
</div>

<div class="form-group">
<label>Email</label>
<input type="email" id="email">
</div>

<div class="form-group">
<label>Phone</label>
<input type="tel" id="phone">
</div>

<div class="form-group">
<label>Location</label>
<input type="text" id="location">
</div>

<div class="form-group">
<label>Course</label>
<select id="course">
<option value="">Select</option>
<option>BCA</option>
<option>BBA</option>
<option>BTech</option>
<option>BCOM</option>
<option>BSC</option>
<option>BA</option>
<option>BE</option>
<option>MCA</option>
<option>MBA</option>
<option>MTECH</option>
<option>MCOM</option>
<option>MSC</option>
<option>MA</option>
<option>ME</option>
</select>
</div>

<button class="add-btn" onclick="addStudent()">Add</button>

</div>

<input type="text" id="search" placeholder="Search..." onkeyup="searchStudent()">
<br><br>

<table>
<thead>
<tr>
<th>Name</th>
<th>Age</th>
<th>DOB</th>
<th>UG Number</th>
<th>Email</th>
<th>Phone</th>
<th>Location</th>
<th>Course</th>
<th>Action</th>
</tr>
</thead>
<tbody id="studentTable"></tbody>
</table>

</div>

<div class="message" id="popupMsg">
Date Of Birth first add then automatically added age
</div>

<script>
let students = JSON.parse(localStorage.getItem("students")) || [];

function saveData(){
localStorage.setItem("students",JSON.stringify(students));
document.getElementById("totalCount").innerText = students.length;
}

function calculateAge(){
let dob = document.getElementById("dob").value;
if(!dob) return;

let birth = new Date(dob);
let today = new Date();
let age = today.getFullYear() - birth.getFullYear();

let m = today.getMonth() - birth.getMonth();
if (m < 0 || (m === 0 && today.getDate() < birth.getDate())) {
age--;
}

document.getElementById("age").value = age;
}

function checkDOB(){
let dob = document.getElementById("dob").value;
if(!dob){
let msg=document.getElementById("popupMsg");
msg.style.display="block";
setTimeout(()=>{
msg.style.display="none";
},3000);
}
}

function displayStudents(list = students){
let table=document.getElementById("studentTable");
table.innerHTML="";

list.forEach((s,i)=>{
table.innerHTML+=`
<tr>
<td>${s.name}</td>
<td>${s.age}</td>
<td>${s.dob}</td>
<td>${s.roll}</td>
<td>${s.email}</td>
<td>${s.phone}</td>
<td>${s.location}</td>
<td>${s.course}</td>
<td>
<button class="edit-btn" onclick="editStudent(${i})">Edit</button>
<button class="delete-btn" onclick="deleteStudent(${i})">Delete</button>
</td>
</tr>`;
});
}

function addStudent(){
let name = document.getElementById("name").value;
let age = document.getElementById("age").value;
let dob = document.getElementById("dob").value;
let roll = document.getElementById("roll").value;
let email = document.getElementById("email").value;
let phone = document.getElementById("phone").value;
let location = document.getElementById("location").value;
let course = document.getElementById("course").value;

if(!name || !age || !dob || !roll || !email || !phone || !location || !course){
alert("Fill all fields");
return;
}

students.push({name,age,dob,roll,email,phone,location,course});
saveData();
displayStudents();

document.querySelectorAll("input").forEach(i=>i.value="");
document.getElementById("course").value="";
}

function editStudent(i){
let s=students[i];

document.getElementById("name").value=s.name;
document.getElementById("age").value=s.age;
document.getElementById("dob").value=s.dob;
document.getElementById("roll").value=s.roll;
document.getElementById("email").value=s.email;
document.getElementById("phone").value=s.phone;
document.getElementById("location").value=s.location;
document.getElementById("course").value=s.course;

students.splice(i,1);
saveData();
displayStudents();
}

function deleteStudent(i){
students.splice(i,1);
saveData();
displayStudents();
}

function searchStudent(){
let value=document.getElementById("search").value.toLowerCase();

let filtered=students.filter(s=>
s.name.toLowerCase().includes(value) ||
s.roll.toLowerCase().includes(value)
);

displayStudents(filtered);
}

saveData();
displayStudents();
</script>

</body>
</html>
